#!/usr/bin/env bash
# Local pre-commit hook: Go vet check
# Install: git config core.hooksPath .githooks
set -euo pipefail

# Only check if Go files changed
STAGED_GO=$(git diff --cached --name-only --diff-filter=ACM | grep '\.go$' || true)
if [ -z "$STAGED_GO" ]; then
  exit 0
fi

echo "pre-commit: running go vet..."
if ! go vet ./... 2>&1; then
  echo ""
  echo "go vet failed. Fix errors before committing."
  exit 1
fi
